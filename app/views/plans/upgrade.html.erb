<% current_plan = current_user&.role %>

<div class="max-w-5xl mx-auto py-10 px-4">
  <!-- Page Heading -->
  <h1 class="text-4xl md:text-5xl font-extrabold text-center text-white mb-6">
    <%= t('upgrade.heading') %>
  </h1>
  <p class="text-center text-gray-300 mb-12 max-w-2xl mx-auto">
    <%= t('upgrade.subheading') %>
  </p>

  <!-- Cards -->
  <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
    <!-- 1) Personal / User -->
    <div class="
         relative bg-gray-800 rounded-lg shadow p-8 flex flex-col
         transform transition-transform hover:scale-105
         <%= current_plan == 'user' ? 'ring-4 ring-green-500' : '' %>
       ">
      <!-- Special Offer badge -->
      <div class="absolute top-0 left-0 bg-pink-600 text-white text-xs font-semibold px-2 py-1 rounded-br">
        <%= t('upgrade.plan_personal.special_offer') %>
      </div>

      <!-- Plan Name -->
      <h2 class="text-3xl font-bold text-white mb-2">
        <%= t('upgrade.plan_personal.name') %>
      </h2>
      <!-- Subheading / teaser -->
      <h3 class="text-sm text-gray-400 font-medium mb-6">
        <%= t('upgrade.plan_personal.teaser') %>
      </h3>

      <!-- Features -->
      <ul class="text-gray-300 text-sm space-y-2 mb-6">
        <li><%= t('upgrade.plan_personal.features.item1') %></li>
        <li><%= t('upgrade.plan_personal.features.item2') %></li>
        <li><%= t('upgrade.plan_personal.features.item3') %></li>
      </ul>

      <!-- Price -->
      <div class="mt-auto mb-6">
        <p class="text-gray-400 text-base">
          <span class="font-medium"><%= t('upgrade.price_label') %></span>
          <strong class="text-white"><%= t('upgrade.plan_personal.price') %></strong>
        </p>
      </div>

      <!-- CTA button -->
      <% if current_plan == 'user' %>
        <%= link_to t('upgrade.current_plan_btn'),
                    root_path,
                    class: 'w-full text-center bg-gray-600 text-white font-semibold py-2 px-4 rounded' %>
      <% else %>
        <%= link_to t('upgrade.plan_personal.choose_btn'),
                    update_role_plans_path(plan: 'user'),
                    data: { turbo_method: :patch },
                    class: "w-full text-center bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-4 rounded" %>
      <% end %>
    </div>

    <!-- 2) Team Lead / Manager -->
    <div class="
         relative bg-gray-800 rounded-lg shadow p-8 flex flex-col
         transform transition-transform hover:scale-105
         <%= current_plan == 'manager' ? 'ring-4 ring-green-500' : '' %>
       ">
      <!-- Most Popular badge -->
      <div class="absolute top-0 left-0 bg-yellow-500 text-white text-xs font-semibold px-2 py-1 rounded-br">
        <%= t('upgrade.plan_manager.badge') %>
      </div>

      <h2 class="text-3xl font-bold text-white mb-2">
        <%= t('upgrade.plan_manager.name') %>
      </h2>
      <h3 class="text-sm text-gray-400 font-medium mb-6">
        <%= t('upgrade.plan_manager.teaser') %>
      </h3>

      <ul class="text-gray-300 text-sm space-y-2 mb-6">
        <li><%= t('upgrade.plan_manager.features.item1') %></li>
        <li><%= t('upgrade.plan_manager.features.item2') %></li>
        <li><%= t('upgrade.plan_manager.features.item3') %></li>
      </ul>

      <div class="mt-auto mb-6">
        <p class="text-gray-400 text-base">
          <span class="font-medium"><%= t('upgrade.price_label') %></span>
          <strong class="text-white"><%= t('upgrade.plan_manager.price') %></strong>
        </p>
      </div>

      <% if current_plan == 'manager' %>
        <%= link_to t('upgrade.current_plan_btn'),
                    root_path,
                    class: 'w-full text-center bg-gray-600 text-white font-semibold py-2 px-4 rounded' %>
      <% else %>
        <%= link_to t('upgrade.plan_manager.choose_btn'),
                    update_role_plans_path(plan: 'manager'),
                    data: { turbo_method: :patch },
                    class: "w-full text-center bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-4 rounded" %>
      <% end %>
    </div>

    <!-- 3) Company Owner -->
    <div class="
         relative bg-gray-800 rounded-lg shadow p-8 flex flex-col
         transform transition-transform hover:scale-105
         <%= current_plan == 'company_owner' ? 'ring-4 ring-green-500' : '' %>
       ">
      <h2 class="text-3xl font-bold text-white mb-2">
        <%= t('upgrade.plan_company_owner.name') %>
      </h2>
      <h3 class="text-sm text-gray-400 font-medium mb-6">
        <%= t('upgrade.plan_company_owner.teaser') %>
      </h3>

      <ul class="text-gray-300 text-sm space-y-2 mb-6">
        <li><%= t('upgrade.plan_company_owner.features.item1') %></li>
        <li><%= t('upgrade.plan_company_owner.features.item2') %></li>
        <li><%= t('upgrade.plan_company_owner.features.item3') %></li>
      </ul>

      <div class="mt-auto mb-6">
        <p class="text-gray-400 text-base">
          <span class="font-medium"><%= t('upgrade.price_label') %></span>
          <strong class="text-white"><%= t('upgrade.plan_company_owner.price') %></strong>
        </p>
      </div>

      <% if current_plan == 'company_owner' %>
        <%= link_to t('upgrade.current_plan_btn'),
                    root_path,
                    class: 'w-full text-center bg-gray-600 text-white font-semibold py-2 px-4 rounded' %>
      <% else %>
        <%= link_to t('upgrade.plan_company_owner.choose_btn'),
                    update_role_plans_path(plan: 'company_owner'),
                    data: { turbo_method: :patch },
                    class: "w-full text-center bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-4 rounded" %>
      <% end %>
    </div>
  </div>
</div>
